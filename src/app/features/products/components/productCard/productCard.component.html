<div
  class="card h-100 shadow-lg rounded-3 position-relative bg-white cursor-pointer hover-scale"
  (click)="onCardClick()"
>
  <!-- Wishlist Button -->
  <button
    class="position-absolute top-0 end-0 m-3 btn btn-link p-0 z-3"
    (click)="toggleWishlist($event)"
    [class.text-danger]="wishlist"
    [class.fw-bold]="wishlist"
  >
    <i class="wishlist-icon bi" [class.bi-heart-fill]="wishlist" [class.bi-heart]="!wishlist"></i>
  </button>

  <!-- Product Image -->
  <div class="position-relative overflow-hidden" style="height: 160px">
    <img
      [src]="product.imageCover"
      [alt]="product.title"
      class="w-100 h-100 object-fit-contain p-3"
    />
  </div>

  <div class="card-body d-flex flex-column p-3">
    <!-- Title (Last 2 words) -->
    <h5 class="card-title fs-6 fw-semibold text-secondary mb-1">
      {{ product.title.split(' ').slice(-2).join(' ') }}
    </h5>

    <!-- Category -->
    <p class="text-primary small mb-2">{{ product.category.name }}</p>

    <!-- Ratings -->
    <div class="d-flex align-items-center mb-2">
      <div class="me-2">
        @for (star of getStarArray(product.ratingsAverage); track $index) {
        <i class="bi bi-star-fill text-warning" [class.text-muted]="star === 0"></i>
        }
      </div>
      <span class="text-muted small">({{ product.ratingsQuantity }} reviews)</span>
    </div>

    <!-- Price -->
    <p class="text-primary fw-bold fs-5 mb-3">${{ product.price.toFixed(2) }}</p>

    <!-- Add to Cart Button -->
    <button
      class="btn btn-primary w-100 d-flex align-items-center justify-content-center gap-2 mt-auto"
      (click)="addToCart($event)"
    >
      <i class="bi bi-cart-plus"></i>
      Add to Cart
    </button>
  </div>
</div>
